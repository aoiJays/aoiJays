<!DOCTYPE html>
<html lang="zh">
    <!-- title -->
<!-- keywords -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="BiribiriBird">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="BiribiriBird">
        <meta name="keywords" content="hexo,hexo-theme,hexo-blog,Neworld1111,AoiJays,BiribiriBird">
    <meta name="description" content="">
    <meta name="description" content="Langchainå…¥é—¨   å‰ç½®å·¥ä½œ  API-KEYé…ç½® APIè°ƒç”¨ Promt ç®€å•åº”ç”¨   ç»„ä»¶ Models  LLMs  æµå¼è¾“å‡º   Chat Models Embedding models   Prompts  PromptTemplate FewShotPromptTemplate   Chains  LLMChain SimpleSequentialChain LLMChainï¼ˆ">
<meta property="og:type" content="article">
<meta property="og:title" content="Langchainå…¥é—¨ç¬”è®°">
<meta property="og:url" content="https://aoijays.top/2024/08/11/langchain-zero/index.html">
<meta property="og:site_name" content="BiribiriBird&#39;s Gallery">
<meta property="og:description" content="Langchainå…¥é—¨   å‰ç½®å·¥ä½œ  API-KEYé…ç½® APIè°ƒç”¨ Promt ç®€å•åº”ç”¨   ç»„ä»¶ Models  LLMs  æµå¼è¾“å‡º   Chat Models Embedding models   Prompts  PromptTemplate FewShotPromptTemplate   Chains  LLMChain SimpleSequentialChain LLMChainï¼ˆ">
<meta property="og:locale">
<meta property="article:published_time" content="2024-08-11T09:04:46.000Z">
<meta property="article:modified_time" content="2024-08-11T09:06:31.287Z">
<meta property="article:author" content="BiribiriBird">
<meta property="article:tag" content="langchain">
<meta name="twitter:card" content="summary">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" href="/assets/favicon.ico">
    <title>Langchainå…¥é—¨ç¬”è®° Â· BiribiriBird&#39;s Gallery</title>
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
    (function (w) {
        'use strict'
        // rel=preload support test
        if (!w.loadCSS) {
            w.loadCSS = function () {}
        }
        // define on the loadCSS obj
        var rp = (loadCSS.relpreload = {})
        // rel=preload feature support test
        // runs once and returns a function for compat purposes
        rp.support = (function () {
            var ret
            try {
                ret = w.document.createElement('link').relList.supports('preload')
            } catch (e) {
                ret = false
            }
            return function () {
                return ret
            }
        })()

        // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
        // then change that media back to its intended value on load
        rp.bindMediaToggle = function (link) {
            // remember existing media attr for ultimate state, or default to 'all'
            var finalMedia = link.media || 'all'

            function enableStylesheet() {
                link.media = finalMedia
            }

            // bind load handlers to enable media
            if (link.addEventListener) {
                link.addEventListener('load', enableStylesheet)
            } else if (link.attachEvent) {
                link.attachEvent('onload', enableStylesheet)
            }

            // Set rel and non-applicable media type to start an async request
            // note: timeout allows this to happen async to let rendering continue in IE
            setTimeout(function () {
                link.rel = 'stylesheet'
                link.media = 'only x'
            })
            // also enable media after 3 seconds,
            // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
            setTimeout(enableStylesheet, 3000)
        }

        // loop through link elements in DOM
        rp.poly = function () {
            // double check this to prevent external calls from running
            if (rp.support()) {
                return
            }
            var links = w.document.getElementsByTagName('link')
            for (var i = 0; i < links.length; i++) {
                var link = links[i]
                // qualify links to those with rel=preload and as=style attrs
                if (
                    link.rel === 'preload' &&
                    link.getAttribute('as') === 'style' &&
                    !link.getAttribute('data-loadcss')
                ) {
                    // prevent rerunning on link
                    link.setAttribute('data-loadcss', true)
                    // bind listeners to toggle media back
                    rp.bindMediaToggle(link)
                }
            }
        }

        // if unsupported, run the polyfill
        if (!rp.support()) {
            // run once at least
            rp.poly()

            // rerun poly on an interval until onload
            var run = w.setInterval(rp.poly, 500)
            if (w.addEventListener) {
                w.addEventListener('load', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            } else if (w.attachEvent) {
                w.attachEvent('onload', function () {
                    rp.poly()
                    w.clearInterval(run)
                })
            }
        }

        // commonjs
        if (typeof exports !== 'undefined') {
            exports.loadCSS = loadCSS
        } else {
            w.loadCSS = loadCSS
        }
    })(typeof global !== 'undefined' ? global : this)
</script>

    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .footer-fixed-btn,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(
            -45deg,
            #444 0,
            #444 80px,
            #333 80px,
            #333 160px
        );
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }
</style>

    <link id="stylesheet-fancybox" rel="preload" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-base" rel="preload" href="/css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link id="stylesheet-mobile" rel="preload" href="/css/mobile.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.media='screen and (max-width: 960px)'">
    <link id="stylesheet-theme-dark" rel="preload" href="/css/dark.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js" as="script">
    <link rel="preload" href="/font/Oswald-Regular.ttf" as="font" crossorigin>
    <link rel="preload" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" as="font" crossorigin>
    <!-- algolia -->
    <!-- ç™¾åº¦ç»Ÿè®¡  -->
    <!-- è°·æ­Œç»Ÿè®¡  -->
    <!-- Google tag (gtag.js) -->
<meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ == undefined) {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js" />')
        }
    </script>
        <body class="post-body">
        <!-- header -->
        <header class="header header-mobile">
    <!-- top read progress line -->
    <div class="header-element">
        <div class="read-progress"></div>
    </div>
    <!-- sidebar menu button -->
    <div class="header-element">
        <div class="header-sidebar-menu">
            <div style="padding-left: 1px;">&#xe775;</div>
        </div>
    </div>
    <!-- header actions -->
    <div class="header-actions">
        <!-- theme mode switch button -->
        <span class="header-theme-btn header-element">
            <i class="fas fa-adjust"></i>
        </span>
        <!-- back to home page text -->
        <span class="home-link header-element">
            <a href="/">BiribiriBird's Gallery.</a>
        </span>
    </div>
    <!-- toggle banner -->
    <div class="banner">
        <div class="blog-title header-element">
            <a href="/">BiribiriBird&#39;s Gallery.</a>
        </div>
        <div class="post-title header-element">
            <a href="#" class="post-name">Langchainå…¥é—¨ç¬”è®°</a>
        </div>
    </div>
</header>

        <!-- fixed footer -->
        <footer class="footer-fixed">
    <!-- donate button -->

    <!-- back to top button -->
    <div class="footer-fixed-btn footer-fixed-btn--hidden back-top">
        <div>&#xe639;</div>
    </div>
</footer>

        <!-- wrapper -->
        <div class="wrapper">
            <div class="site-intro" style="    height:50vh;
">
    <!-- ä¸»é¡µ  -->
    <!-- 404é¡µ  -->
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- æ ‡é¢˜  -->
        <h1 class="intro-title">
            <!-- ä¸»é¡µ  -->
                Langchainå…¥é—¨ç¬”è®°
            <!-- 404 -->
        </h1>
        <!-- å‰¯æ ‡é¢˜ -->
        <p class="intro-subtitle">
            <!-- ä¸»é¡µå‰¯æ ‡é¢˜  -->
            <!-- 404 -->
        </p>
        <!-- æ–‡ç« é¡µ meta -->
            <div class="post-intros">
                <!-- æ–‡ç« é¡µæ ‡ç­¾  -->
                    <div class="post-intro-tags" >
        <a class="post-tag" href="javascript:void(0);" data-tags="langchain">langchain</a>
</div>

                <!-- æ–‡ç« å­—æ•°ç»Ÿè®¡ -->
                    <div class="post-intro-read">
                        <span>å­—æ•°ç»Ÿè®¡: <span class="post-count word-count">5.7k</span>é˜…è¯»æ—¶é•¿: <span class="post-count reading-time">25 min</span></span>
                    </div>
                <div class="post-intro-meta">
                    <!-- æ’°å†™æ—¥æœŸ -->
                    <span class="iconfont-archer post-intro-calander">&#xe676;</span>
                    <span class="post-intro-time">2024/08/11</span>
                    <!-- busuanzi -->
                        <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                            <span class="iconfont-archer post-intro-busuanzi">&#xe602;</span>
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    <!-- æ–‡ç« åˆ†äº« -->
                    <span class="share-wrapper">
                        <span class="iconfont-archer share-icon">&#xe71d;</span>
                        <span class="share-text">Share</span>
                        <ul class="share-list">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
    </div>
</div>

            <script>
  // get user agent
  function getBrowserVersions() {
    var u = window.navigator.userAgent
    return {
      userAgent: u,
      trident: u.indexOf('Trident') > -1, //IEå†…æ ¸
      presto: u.indexOf('Presto') > -1, //operaå†…æ ¸
      webKit: u.indexOf('AppleWebKit') > -1, //è‹¹æœã€è°·æ­Œå†…æ ¸
      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //ç«ç‹å†…æ ¸
      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯
      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯
      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨
      iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //æ˜¯å¦ä¸ºiPhoneæˆ–è€…å®‰å“QQæµè§ˆå™¨
      iPad: u.indexOf('iPad') > -1, //æ˜¯å¦ä¸ºiPad
      webApp: u.indexOf('Safari') == -1, //æ˜¯å¦ä¸ºwebåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸åº•éƒ¨
      weixin: u.indexOf('MicroMessenger') == -1, //æ˜¯å¦ä¸ºå¾®ä¿¡æµè§ˆå™¨
      uc: u.indexOf('UCBrowser') > -1, //æ˜¯å¦ä¸ºandroidä¸‹çš„UCæµè§ˆå™¨
    }
  }
  var browser = {
    versions: getBrowserVersions(),
  }
  console.log('userAgent: ' + browser.versions.userAgent)

  // callback
  function fontLoaded() {
    console.log('font loaded')
    if (document.getElementsByClassName('site-intro-meta')) {
      document
        .getElementsByClassName('intro-title')[0]
        .classList.add('intro-fade-in')
      document
        .getElementsByClassName('intro-subtitle')[0]
        .classList.add('intro-fade-in')
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in')
      }
    }
  }

  // UCä¸æ”¯æŒè·¨åŸŸï¼Œæ‰€ä»¥ç›´æ¥æ˜¾ç¤º
  function asyncCb() {
    if (browser.versions.uc) {
      console.log('UCBrowser')
      fontLoaded()
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular'],
        },
        loading: function () {
          // æ‰€æœ‰å­—ä½“å¼€å§‹åŠ è½½
          // console.log('font loading');
        },
        active: function () {
          // æ‰€æœ‰å­—ä½“å·²æ¸²æŸ“
          fontLoaded()
        },
        inactive: function () {
          // å­—ä½“é¢„åŠ è½½å¤±è´¥ï¼Œæ— æ•ˆå­—ä½“æˆ–æµè§ˆå™¨ä¸æ”¯æŒåŠ è½½
          console.log('inactive: timeout')
          fontLoaded()
        },
        timeout: 5000, // Set the timeout to two seconds
      })
    }
  }

  function asyncErr() {
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0]
    o.src = u
    if (cb) {
      o.addEventListener(
        'load',
        function (e) {
          cb(null, e)
        },
        false
      )
    }
    if (err) {
      o.addEventListener(
        'error',
        function (e) {
          err(null, e)
        },
        false
      )
    }
    s.parentNode.insertBefore(o, s)
  }

  var asyncLoadWithFallBack = function (arr, success, reject) {
    var currReject = function () {
      reject()
      arr.shift()
      if (arr.length) async(arr[0], success, currReject)
    }

    async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack(
    [
      'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js',
      'https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js',
      "/lib/webfontloader.min.js",
    ],
    asyncCb,
    asyncErr
  )
</script>

            <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" alt="loading">
            <div class="container container-unloaded">
                <main class="main post-page">
    <article class="article-entry">
        <h1><span id="langchainå…¥é—¨">Langchainå…¥é—¨</span></h1>
<!-- toc -->
<ul>
<li><a href="#%E5%89%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C">å‰ç½®å·¥ä½œ</a>
<ul>
<li><a href="#api-key%E9%85%8D%E7%BD%AE">API-KEYé…ç½®</a></li>
<li><a href="#api%E8%B0%83%E7%94%A8">APIè°ƒç”¨</a></li>
<li><a href="#promt-%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8">Promt ç®€å•åº”ç”¨</a></li>
</ul>
</li>
<li><a href="#%E7%BB%84%E4%BB%B6">ç»„ä»¶</a></li>
<li><a href="#models">Models</a>
<ul>
<li><a href="#llms">LLMs</a>
<ul>
<li><a href="#%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA">æµå¼è¾“å‡º</a></li>
</ul>
</li>
<li><a href="#chat-models">Chat Models</a></li>
<li><a href="#embedding-models">Embedding models</a></li>
</ul>
</li>
<li><a href="#prompts">Prompts</a>
<ul>
<li><a href="#prompttemplate">PromptTemplate</a></li>
<li><a href="#fewshotprompttemplate">FewShotPromptTemplate</a></li>
</ul>
</li>
<li><a href="#chains">Chains</a>
<ul>
<li><a href="#llmchain">LLMChain</a></li>
<li><a href="#simplesequentialchain">SimpleSequentialChain</a></li>
<li><a href="#llmchain%E5%86%8D%E8%A7%A3%E9%87%8A">LLMChainï¼ˆå†è§£é‡Šï¼‰</a></li>
<li><a href="#simplesequentialchain%E5%86%8D%E8%A7%A3%E9%87%8A">SimpleSequentialChainï¼ˆå†è§£é‡Šï¼‰</a></li>
<li><a href="#sequentialchain">SequentialChain</a></li>
</ul>
</li>
<li><a href="#agents">Agents</a></li>
<li><a href="#memory">Memory</a>
<ul>
<li><a href="#chatmessagehistory">ChatMessageHistory</a></li>
<li><a href="#%E9%95%BF%E6%9C%9F%E8%AE%B0%E5%BF%86">é•¿æœŸè®°å¿†</a></li>
<li><a href="#conversationchains">ConversationChains</a></li>
</ul>
</li>
<li><a href="#indexes">Indexes</a>
<ul>
<li><a href="#textloader">TextLoader</a></li>
<li><a href="#charactertextsplitter">CharacterTextSplitter</a></li>
<li><a href="#%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93">å‘é‡æ•°æ®åº“</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<blockquote>
<p>åšçš„æœ€å¤šçš„äº‹æƒ…å°±æ˜¯è‡ªå·±æŸ¥æ–‡æ¡£ï¼ˆ</p>
<p>æŠŠæ–‡æ¡£æŸ¥å¥½åŸºæœ¬å°±å­¦å®Œäº†</p>
<ul>
<li>**APIï¼š**é€šä¹‰åƒé—®</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/aoiJays/ECNU-cs-LangChain">å®Œæˆå“ - ECNU-cs-LangChain </a></p>
</blockquote>
<h2><span id="å‰ç½®å·¥ä½œ">å‰ç½®å·¥ä½œ</span></h2>
<blockquote>
<p>[Qwen API æ–‡æ¡£](<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/dashscope/developer-reference/use-qwen-by-api">å¦‚ä½•ä½¿ç”¨é€šä¹‰åƒé—®API_æ¨¡å‹æœåŠ¡çµç§¯(DashScope)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ (aliyun.com)</a>)</p>
</blockquote>
<p>å…ˆæ‰¾ä¸ªå…è´¹çš„APIç©ç©ï¼ˆ</p>
<p>æ¥å£ä¾æ—§ä½¿ç”¨openaié‚£ä¸€å¥—å·¥å…·ï¼Œæ¯”è¾ƒå‹å¥½</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U openai <span class="comment"># å®‰è£…openai åŒ…å¹¶å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure>
<h3><span id="api-keyé…ç½®">API-KEYé…ç½®</span></h3>
<p>ç„¶åæ‹¿ä¸€ä¸ªapi-keyå…ˆ</p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/dashscope/developer-reference/acquisition-and-configuration-of-api-key?spm=a2c4g.11186623.0.0.65fe46c1Nhryxe">å¦‚ä½•è·å–é€šä¹‰åƒé—®APIçš„KEY_æ¨¡å‹æœåŠ¡çµç§¯(DashScope)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ (aliyun.com)</a></p>
<p>æ˜¾ç„¶ä¸å¸Œæœ›æŠŠè‡ªå·±çš„API-Keyæ˜¾å¼åœ°æš´éœ²åœ¨ä»£ç é‡Œé¢</p>
<p>æ‰€ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œè®¾ç½®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”¨ API-KEY ä»£æ›¿ YOUR_DASHSCOPE_API_KEY</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export DASHSCOPE_API_KEY=&#x27;sk-25580ab055e647bc9a63834d9f54358a&#x27;&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DASHSCOPE_API_KEY</span> <span class="comment"># è¾“å‡ºæˆåŠŸåˆ™å®Œæˆè®¾ç½®</span></span><br></pre></td></tr></table></figure>
<h3><span id="apiè°ƒç”¨">APIè°ƒç”¨</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># openai.api_key = os.environ[&quot;DASHSCOPE_API_KEY&quot;]</span></span><br><span class="line"><span class="comment"># openai.api_base = &quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_completion</span>(<span class="params">prompt, model = <span class="string">&#x27;qwen1.5-1.8b-chat&#x27;</span></span>):</span><br><span class="line">    </span><br><span class="line">    client = openai.OpenAI(</span><br><span class="line">        api_key=os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>], <span class="comment"># è°ƒç”¨ç¯å¢ƒå˜é‡</span></span><br><span class="line">        base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>,  </span><br><span class="line">        <span class="comment"># å¡«å†™DashScopeæœåŠ¡çš„base_url</span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    messages= [&#123;<span class="string">&#x27;role&#x27;</span>: <span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;content&#x27;</span>: prompt&#125;]</span><br><span class="line">    </span><br><span class="line">    completion = client.chat.completions.create(</span><br><span class="line">        model = model, messages=messages, temperature=<span class="number">0</span></span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> completion</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">get_completion(<span class="string">&#x27;1+1=?&#x27;</span>).model_dump_json() <span class="comment"># è½¬json</span></span><br><span class="line"><span class="comment"># get_completion(&#x27;1+1=?&#x27;).choices[0].message.content ç›´æ¥è·å–å›ç­”</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°çš„completionå¯¹è±¡ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chatcmpl-bb28bd68-71b9-9265-9ec7-31f196e28d0c&quot;</span><span class="punctuation">,</span>  <span class="comment">// å®Œæˆè¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line">    <span class="attr">&quot;choices&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">// æ¨¡å‹ç”Ÿæˆçš„é€‰é¡¹åˆ—è¡¨</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;finish_reason&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stop&quot;</span><span class="punctuation">,</span>  <span class="comment">// ç”Ÿæˆåœæ­¢çš„åŸå› ï¼ˆä¾‹å¦‚ï¼Œåœæ­¢æ ‡è®°ã€æœ€å¤§tokensç­‰ï¼‰</span></span><br><span class="line">            <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span>  <span class="comment">// è¯¥é€‰é¡¹åœ¨ç”Ÿæˆé€‰é¡¹åˆ—è¡¨ä¸­çš„ç´¢å¼•</span></span><br><span class="line">            <span class="attr">&quot;logprobs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>  <span class="comment">// tokensçš„å¯¹æ•°æ¦‚ç‡ï¼ˆnullè¡¨ç¤ºæ²¡æœ‰è¿”å›å¯¹æ•°æ¦‚ç‡ï¼‰</span></span><br><span class="line">            <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1 + 1 equals 2.&quot;</span><span class="punctuation">,</span>  <span class="comment">// æ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line">                <span class="attr">&quot;refusal&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>  <span class="comment">// æ‹’ç»ç†ç”±ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span></span><br><span class="line">                <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span><span class="punctuation">,</span>  <span class="comment">// æ¶ˆæ¯çš„è§’è‰²ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·æˆ–åŠ©æ‰‹ï¼‰</span></span><br><span class="line">                <span class="attr">&quot;function_call&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>  <span class="comment">// å‡½æ•°è°ƒç”¨ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span></span><br><span class="line">                <span class="attr">&quot;tool_calls&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span>  <span class="comment">// å·¥å…·è°ƒç”¨ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;created&quot;</span><span class="punctuation">:</span> <span class="number">1723016017</span><span class="punctuation">,</span>  <span class="comment">// åˆ›å»ºæ—¶é—´ï¼ˆUNIXæ—¶é—´æˆ³ï¼‰</span></span><br><span class="line">    <span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;qwen1.5-1.8b-chat&quot;</span><span class="punctuation">,</span>  <span class="comment">// ä½¿ç”¨çš„æ¨¡å‹åç§°</span></span><br><span class="line">    <span class="attr">&quot;object&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chat.completion&quot;</span><span class="punctuation">,</span>  <span class="comment">// å¯¹è±¡ç±»å‹ï¼ˆè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªèŠå¤©å®Œæˆè¯·æ±‚ï¼‰</span></span><br><span class="line">    <span class="attr">&quot;service_tier&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>  <span class="comment">// æœåŠ¡ç­‰çº§ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</span></span><br><span class="line">    <span class="attr">&quot;system_fingerprint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span>  <span class="comment">// ç³»ç»ŸæŒ‡çº¹ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</span></span><br><span class="line">    <span class="attr">&quot;usage&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;completion_tokens&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span>  <span class="comment">// å®Œæˆå“åº”ä½¿ç”¨çš„tokensæ•°é‡</span></span><br><span class="line">        <span class="attr">&quot;prompt_tokens&quot;</span><span class="punctuation">:</span> <span class="number">12</span><span class="punctuation">,</span>  <span class="comment">// æç¤ºä½¿ç”¨çš„tokensæ•°é‡</span></span><br><span class="line">        <span class="attr">&quot;total_tokens&quot;</span><span class="punctuation">:</span> <span class="number">20</span>  <span class="comment">// è¯·æ±‚ä¸­ä½¿ç”¨çš„æ€»tokensæ•°é‡</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3><span id="promt-ç®€å•åº”ç”¨">Promt ç®€å•åº”ç”¨</span></h3>
<p>è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘éœ€è¦æŠŠæ”¶åˆ°çš„ä¸€æ®µæ–‡æœ¬ï¼Œæ›´æ¢è¡¨è¾¾è¯­æ°”ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&#x27;æˆ‘å¯¹ä½ çš„äº§å“æˆ–æœåŠ¡æ²¡æœ‰ä»»ä½•å…´è¶£ã€‚è¯·ç«‹å³ä»ä½ çš„åå•ä¸­åˆ é™¤æˆ‘çš„å·ç ï¼Œä¸è¦å†æ‰“æ‰°æˆ‘ã€‚&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¸Œæœ›æ›´æ¢æˆä¸€ä¸ªå¹³æ·¡çš„è¯­æ°”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style = <span class="string">&#x27;ç¤¼è²Œä¸”è°ˆåå¾—å½“ã€é¥±è¯»è¯—ä¹¦çš„è¯­æ°”&#x27;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æ„å»ºä¸€ä¸ªpromtæ¨¡æ¿ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prompt = <span class="string">f&quot;ä½¿ç”¨æŒ‡å®šçš„é£æ ¼ã€è¯­æ°”ï¼Œè½¬æ¢ä»¥ä¸‹æ–‡æœ¬ã€‚\nè¦æ±‚çš„é£æ ¼æ˜¯<span class="subst">&#123;style&#125;</span>\næ–‡æœ¬ï¼š```<span class="subst">&#123;text&#125;</span>```&quot;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ä½¿ç”¨æŒ‡å®šçš„é£æ ¼ã€è¯­æ°”ï¼Œè½¬æ¢ä»¥ä¸‹æ–‡æœ¬ã€‚</span></span><br><span class="line"><span class="string">è¦æ±‚çš„é£æ ¼æ˜¯ç¤¼è²Œä¸”è°ˆåå¾—å½“ã€é¥±è¯»è¯—ä¹¦çš„è¯­æ°”</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š```æˆ‘å¯¹ä½ çš„äº§å“æˆ–æœåŠ¡æ²¡æœ‰ä»»ä½•å…´è¶£ã€‚è¯·ç«‹å³ä»ä½ çš„åå•ä¸­åˆ é™¤æˆ‘çš„å·ç ï¼Œä¸è¦å†æ‰“æ‰°æˆ‘ã€‚```</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨APIå³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">get_completion(prompt)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;å°Šæ•¬çš„å®¢æˆ·ï¼Œ\n\næˆ‘å¸Œæœ›æ‚¨ä¸€åˆ‡éƒ½å¥½ã€‚é‰´äºæˆ‘ä¸€ç›´ä»¥æ¥å¯¹è´µå…¬å¸çš„äº§å“å’ŒæœåŠ¡æŒæœ‰åŸºæœ¬çš„ä¿¡ä»»ï¼Œä½†æ ¹æ®å½“å‰çš„éœ€æ±‚å’Œå®é™…æƒ…å†µï¼Œæˆ‘å†³å®šä¸å†è€ƒè™‘ä¸æ‚¨çš„è”ç³»ï¼Œå¹¶å°†å…¶ä»æˆ‘ä»¬çš„ç°æœ‰å®¢æˆ·åˆ—è¡¨ä¸­ç§»é™¤ã€‚\n\nåœ¨è¿‡å»çš„æ—¥å­é‡Œï¼Œæˆ‘åœ¨å„ç§åœºåˆéƒ½é˜…è¯»è¿‡å¤§é‡å…³äºè´µå…¬å¸çš„æ–‡ç« å’Œè¯„è®ºï¼Œå¯¹å…¶å“è¶Šçš„äº§å“è´¨é‡ã€ä¸“ä¸šæœåŠ¡ä»¥åŠæ·±å…·å½±å“åŠ›çš„å¸‚åœºåœ°ä½æ·±æ„Ÿæ•¬ä½©ã€‚ç„¶è€Œï¼Œæœ€è¿‘åœ¨å¤„ç†ä¸€äº›ä¸ªäººäº‹åŠ¡æ—¶ï¼Œæˆ‘å¶ç„¶å‘ç°äº†ä¸€äº›ä»¤æˆ‘ä¸æ»¡ä¹‹å¤„ï¼Œå¯¼è‡´æˆ‘éœ€è¦é‡æ–°è¯„ä¼°æˆ‘ä¸è´µå…¬å¸ä¹‹é—´çš„åˆä½œå…³ç³»ã€‚\n\nå¯¹äºè¿™ä¸ªå†³å®šï¼Œæˆ‘æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼šé¦–å…ˆï¼Œè¿‘æœŸæˆ‘æ¥åˆ°äº†ä¸€ä¸ªé‡è¦çš„å•†åŠ¡ç”µè¯ä¼šè®®ï¼Œè¿™å¯èƒ½æ„å‘³ç€æˆ‘å°†ä¸å¾—ä¸åœ¨éå¸¸å¿™ç¢Œçš„ç¯å¢ƒä¸­å‚ä¸ã€‚åŸºäºè¿™ç§æ—¶é—´å‹åŠ›å’Œä¸ªäººä¼˜å…ˆäº‹é¡¹è€ƒé‡ï¼Œæˆ‘è§‰å¾—æ›´é«˜æ•ˆçš„æ–¹å¼æ˜¯æˆ‘èƒ½ä¸“æ³¨äºè¿™æ¬¡ä¼šè®®ï¼Œè€Œéæ— è°“åœ°è¢«æ‚¨çš„ç”µè¯æ‰“æ–­ã€‚\n\nå…¶æ¬¡ï¼Œæˆ‘å‘ç°è´µå…¬å¸åœ¨æŸäº›æ–¹é¢å­˜åœ¨ä¸€äº›ç–‘è™‘å’Œæœªè§£å†³çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½ä¼šå½±å“åˆ°æˆ‘å¯¹è´µå…¬å¸çš„æ•´ä½“ä¿¡ä»»åº¦å’Œæ»¡æ„åº¦ã€‚é€šè¿‡æŸ¥é˜…ç›¸å…³èµ„æ–™å’Œä¸ç›¸å…³äººå‘˜è¿›è¡Œæ·±å…¥äº¤æµï¼Œæˆ‘äº†è§£åˆ°éƒ¨åˆ†æœåŠ¡é¡¹ç›®å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œä¾‹å¦‚å¤„ç†æ•ˆç‡ä½ä¸‹ã€å”®åæœåŠ¡æœ‰å¾…æå‡ç­‰ã€‚è¿™äº›å®é™…çš„é—®é¢˜ä¸æˆ‘å¯¹è´µå…¬å¸ä»·å€¼çš„è®¤çŸ¥ç›¸å†²çªï¼Œä»è€Œè®©æˆ‘æ„Ÿåˆ°ä¸é€‚å¹¶éš¾ä»¥æ¥å—ã€‚\n\næœ€åï¼Œæˆ‘æ³¨æ„åˆ°æ‚¨çš„æœåŠ¡çƒ­çº¿ç»å¸¸å‡ºç°å™ªéŸ³å¹²æ‰°å’Œé«˜åˆ†è´å™ªå£°ï¼Œä¸¥é‡å½±å“äº†æˆ‘åœ¨é€šè¯è¿‡ç¨‹ä¸­çš„ä¸“æ³¨åŠ›å’Œå·¥ä½œæ•ˆç‡ã€‚è™½ç„¶æˆ‘çŸ¥é“è´µå…¬å¸æ­£åœ¨ç§¯ææ”¹å–„æœåŠ¡è´¨é‡ï¼Œä½†æˆ‘è®¤ä¸ºé€šè¿‡ä¼˜åŒ–ç”µè¯ç³»ç»Ÿçš„è®¾ç½®å’Œç»´æŠ¤ï¼Œå¯ä»¥æ˜¾è‘—æé«˜é€šè¯ä½“éªŒå’Œè´¨é‡ï¼Œè¿›ä¸€æ­¥å¢å¼ºæˆ‘å¯¹è´µå…¬å¸çš„å¿ è¯šåº¦å’Œæ¨èåº¦ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºä»¥ä¸Šå‡ ç‚¹å› ç´ ï¼Œæˆ‘å†³å®šåœæ­¢ä¸è´µå…¬å¸çš„ç°æœ‰ä¸šåŠ¡å…³ç³»ï¼Œå¹¶æå‡ºæ­¤è¯·æ±‚ã€‚å¸Œæœ›æ‚¨èƒ½ç†è§£æˆ‘çš„ç«‹åœºï¼Œå¹¶å°½å¿«é‡‡å–è¡ŒåŠ¨ï¼Œä»¥æ»¡è¶³æˆ‘æ‰€æå‡ºçš„æ”¹è¿›éœ€æ±‚å’ŒæœŸæœ›ï¼Œç¡®ä¿æˆ‘ä»¬ä¿æŒè‰¯å¥½çš„æ²Ÿé€šå’Œåˆä½œå…³ç³»ã€‚æ„Ÿè°¢æ‚¨çš„ç†è§£å’Œé…åˆï¼ŒæœŸå¾…åœ¨æœªæ¥æœ‰æœºä¼šä¸è´µå…¬å¸è¿›è¡Œæ›´æ·±å…¥çš„æ¢è®¨å’Œåˆä½œæœºä¼šã€‚\n\né¡ºç¥å•†ç¥ºï¼Œ\n[æ‚¨çš„å§“å]\n[æ‚¨çš„èŒä½]\n[è”ç³»æ–¹å¼]&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹è®°å½•ï¼Œå¦‚ä½•ä½¿ç”¨Langchainï¼Œå®Œæˆæ›´åŠ å¤æ‚çš„ä»»åŠ¡</p>
<h2><span id="ç»„ä»¶">ç»„ä»¶</span></h2>
<ul>
<li>Models</li>
<li>Prompts</li>
<li>Memory</li>
<li>Indexes</li>
<li>Chains</li>
<li>Agents</li>
</ul>
<h2><span id="models">Models</span></h2>
<ul>
<li>LLMs
<ul>
<li>è¾“å…¥ï¼šæ–‡æœ¬å­—ç¬¦ä¸²</li>
<li>è¾“å‡ºï¼šæ–‡æœ¬å­—ç¬¦ä¸²</li>
</ul>
</li>
<li>Chat Models
<ul>
<li>è¾“å…¥ï¼šèŠå¤©æ¶ˆæ¯åˆ—è¡¨</li>
<li>è¾“å‡ºï¼šèŠå¤©æ¶ˆæ¯</li>
</ul>
</li>
<li>Text Embbeding Models
<ul>
<li>è¾“å…¥ï¼šæ–‡æœ¬</li>
<li>è¾“å‡ºï¼šæµ®ç‚¹æ•°åˆ—è¡¨</li>
</ul>
</li>
</ul>
<h3><span id="llms">LLMs</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/llms/tongyi/">æ–‡æ¡£ï¼šModels - LLMs - Tongyi Qwen | ğŸ¦œï¸ğŸ”— LangChain</a></p>
<p><a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/llms/langchain_community.llms.tongyi.Tongyi.html">Tongyiå¯¹è±¡æ–‡æ¡£ï¼šlangchain_community.llms.tongyi.Tongyi â€” ğŸ¦œğŸ”— LangChain 0.2.12</a></p>
</blockquote>
<p>ä½¿ç”¨çš„æ˜¯é€šä¹‰åƒé—®æä¾›çš„APIï¼Œå› æ­¤å‰å¾€langchainå¯¹äºé€šä¹‰åƒé—®çš„å°è£…æ–‡æ¡£å³å¯</p>
<p>é¦–å…ˆå®‰è£…langchainçš„langchain-communityåº“</p>
<p>å› ä¸ºæ˜¯é€šä¹‰åƒé—®çš„ï¼Œæ‰€ä»¥è¿˜éœ€è¦å®‰è£…ä¸€ä¸‹<code>dashscope</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade --quiet  langchain-community dashscope</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.llms <span class="keyword">import</span> Tongyi</span><br><span class="line">llm = Tongyi( </span><br><span class="line">    model_name=<span class="string">&quot;qwen1.5-1.8b-chat&quot;</span>, </span><br><span class="line">    temperature=<span class="number">0.95</span>, </span><br><span class="line">    top_p=<span class="number">0.7</span>, </span><br><span class="line">    max_tokens=<span class="number">100</span> </span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>( llm.invoke(<span class="string">&quot;ä½ å¥½å—ï¼Ÿ&quot;</span>) ) <span class="comment"># å­—ç¬¦ä¸²å½¢å¼è¾“å…¥è¾“å‡º</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>temperature</code> å‚æ•°ï¼ˆTï¼‰è°ƒæ•´softmaxçš„åˆ†å¸ƒï¼Œæ§åˆ¶æ¨¡å‹è¾“å‡ºçš„éšæœºæ€§</p>
<ul>
<li>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mi>exp</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>o</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi><mo stretchy="false">)</mo></mrow><mrow><munder><mo>âˆ‘</mo><mi>j</mi></munder><mi>exp</mi><mo>â¡</mo><mrow><mo stretchy="false">(</mo><msub><mi>o</mi><mi>j</mi></msub><mi mathvariant="normal">/</mi><mi>T</mi><mo stretchy="false">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">p_i = \frac{\exp(o_i/T)}{\sum_j \exp{(o_j/T)}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.5488180000000003em;vertical-align:-1.1218180000000002em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">exp</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">o</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.1218180000000002em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
</li>
<li>
<p>Tè¶Šå°ï¼Œç”Ÿæˆè¶Šä¿å®ˆã€‚Tè¶Šå¤§ï¼Œç”Ÿæˆè¶Šéšæœºï¼ˆç›¸å½“äºæ‰€æœ‰æ¦‚ç‡éƒ½ç›¸ç­‰ï¼‰</p>
</li>
<li>
<p>T=1ï¼Œæ— è°ƒæ•´</p>
</li>
</ul>
</li>
<li>
<p><code>top_p</code></p>
<ul>
<li>ç´¯è®¡æ¦‚ç‡é å‰çš„å‡ ä¸ªtokençš„æ¦‚ç‡å€¼ï¼Œå½“æ¦‚ç‡å’Œåˆ°è¾¾<code>top_p</code>æ—¶ï¼Œä¸å†è€ƒè™‘å‰©ä¸‹çš„token</li>
</ul>
</li>
<li>
<p><code>top_k</code></p>
<ul>
<li>è€ƒè™‘çš„tokenæ•°é‡</li>
</ul>
</li>
</ul>
<h4><span id="æµå¼è¾“å‡º">æµå¼è¾“å‡º</span></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="comment"># æµå¼è¾“å‡º</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">stream_words</span>(<span class="params">prompt, llm</span>):</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">for</span> chunk <span class="keyword">in</span> llm.astream([prompt]):</span><br><span class="line">        words = chunk.split()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;word&#125;</span>&quot;</span>, end=<span class="string">&#x27;&#x27;</span>, flush=<span class="literal">True</span>) </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œä¸»å‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    prompt = <span class="string">&quot;è®²ä¸€ä¸ªæ•…äº‹ï¼Œä¸è¶…è¿‡30å­—&quot;</span></span><br><span class="line">    llm = Tongyi( model_name=<span class="string">&quot;qwen1.5-1.8b-chat&quot;</span>, temperature=<span class="number">0.95</span>, top_p=<span class="number">0.7</span>, max_tokens=<span class="number">10</span>, streaming = <span class="literal">True</span>)</span><br><span class="line">    asyncio.run(stream_words(prompt, llm))</span><br></pre></td></tr></table></figure>
<h3><span id="chat-models">Chat Models</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/chat/tongyi/">æ–‡æ¡£ï¼šModels - Chat Models - ChatTongyi | ğŸ¦œï¸ğŸ”— LangChain</a></p>
<p><a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/chat_models/langchain_community.chat_models.tongyi.ChatTongyi.html">å¯¹è±¡æ–‡æ¡£ï¼šlangchain_community.chat_models.tongyi.ChatTongyi â€” ğŸ¦œğŸ”— LangChain 0.2.12</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.chat_models.tongyi <span class="keyword">import</span> ChatTongyi</span><br><span class="line">chatLLM = ChatTongyi(</span><br><span class="line">    model_name=<span class="string">&quot;qwen1.5-1.8b-chat&quot;</span>, temperature=<span class="number">0.95</span>, </span><br><span class="line">    top_p=<span class="number">0.7</span>, max_tokens=<span class="number">500</span> </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•å¯¹æ¶ˆæ¯è¿›è¡Œå®šä¹‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.messages <span class="keyword">import</span> HumanMessage, SystemMessage</span><br><span class="line">messages = [</span><br><span class="line">    SystemMessage(</span><br><span class="line">        content=<span class="string">&quot;You are a helpful assistant that translates English to French.&quot;</span></span><br><span class="line">    ),</span><br><span class="line">    HumanMessage(</span><br><span class="line">        content=<span class="string">&quot;Translate this sentence from English to French. I love programming.&quot;</span></span><br><span class="line">    ),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">messages = [</span><br><span class="line">    (<span class="string">&quot;system&quot;</span>, <span class="string">&quot;ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;human&quot;</span>, <span class="string">&quot;æˆ‘å–œæ¬¢ç¼–ç¨‹ã€‚&quot;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chatLLM.invoke(messages) <span class="comment"># æˆ–è€…ç›´æ¥ chatLLM(messages)</span></span><br><span class="line"><span class="comment"># æ¨èinvoke</span></span><br></pre></td></tr></table></figure>
<p>è¿”å›å†…å®¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">AIMessage(</span><br><span class="line">    content=<span class="string">&quot;J&#x27;aime programmer.&quot;</span>, </span><br><span class="line">    response_metadata=&#123;</span><br><span class="line">        <span class="string">&#x27;model_name&#x27;</span>: <span class="string">&#x27;qwen1.5-1.8b-chat&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;finish_reason&#x27;</span>: <span class="string">&#x27;stop&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;request_id&#x27;</span>: <span class="string">&#x27;810ae9a8-1365-913b-a2d2-f4b6be06cf58&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;token_usage&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;input_tokens&#x27;</span>: <span class="number">36</span>, </span><br><span class="line">            <span class="string">&#x27;output_tokens&#x27;</span>: <span class="number">5</span>, </span><br><span class="line">            <span class="string">&#x27;total_tokens&#x27;</span>: <span class="number">41</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="built_in">id</span>=<span class="string">&#x27;run-5ee38ee1-f1f2-4b65-9b37-584dd64ee2ee-0&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç›¸æ¯”ä½¿ç”¨LLMsè·å¾—äº†æ›´å¤šå…¶ä»–ä¿¡æ¯</p>
<h3><span id="embedding-models">Embedding models</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/text_embedding/dashscope/">æ–‡æ¡£ï¼šDashScope | ğŸ¦œï¸ğŸ”— LangChain</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.embeddings <span class="keyword">import</span> DashScopeEmbeddings</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">embeddings = DashScopeEmbeddings(</span><br><span class="line">    model=<span class="string">&quot;text-embedding-v1&quot;</span>, dashscope_api_key=os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;Kurokawa Akane&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å•ä¸ªæ–‡æœ¬çš„è¯åµŒå…¥</span></span><br><span class="line">query_result = embeddings.embed_query(text)</span><br><span class="line"><span class="built_in">print</span>(query_result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šä¸ª</span></span><br><span class="line">doc_results = embeddings.embed_documents([<span class="string">&quot;Kurokawa Akane&quot;</span>,<span class="string">&quot;Kurokawa Akane&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(doc_results)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è¾“å‡ºæµ®ç‚¹æ•°åˆ—è¡¨</span></span><br></pre></td></tr></table></figure>
<h2><span id="prompts">Prompts</span></h2>
<h3><span id="prompttemplate">PromptTemplate</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.prompt.PromptTemplate.html">æ–‡æ¡£ï¼šPromptTemplate</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.llms <span class="keyword">import</span> Tongyi</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•1ï¼šPromptTemplateæ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡æ¿å®šä¹‰</span></span><br><span class="line">template = <span class="string">&quot;ä¸€å¥è¯ä»‹ç»ä¸€ä¸‹æ˜æ—¥æ–¹èˆŸå¹²å‘˜&#123;Operators&#125;çš„èº«ä»½&quot;</span></span><br><span class="line"><span class="comment"># æ„å»ºç»„ä»¶</span></span><br><span class="line">prompt = PromptTemplate(template=template, input_variables=[<span class="string">&quot;Operators&quot;</span>])</span><br><span class="line"><span class="comment"># ç”Ÿæˆæ¨¡æ¿</span></span><br><span class="line">prompt_text = prompt.<span class="built_in">format</span>(Operators=<span class="string">&quot;ç¼ªå°”èµ›æ–¯&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•2ï¼šfrom_template</span></span><br><span class="line">template = <span class="string">&quot;ä¸€å¥è¯ä»‹ç»ä¸€ä¸‹æ˜æ—¥æ–¹èˆŸå¹²å‘˜&#123;Operators&#125;çš„èº«ä»½&quot;</span></span><br><span class="line">prompt = PromptTemplate.from_template(template)</span><br><span class="line">prompt_text = prompt.<span class="built_in">format</span>(Operators=<span class="string">&quot;ç¼ªå°”èµ›æ–¯&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">llm = Tongyi( model_name=<span class="string">&quot;qwen1.5-1.8b-chat&quot;</span>, temperature=<span class="number">0.95</span>, top_p=<span class="number">0.7</span>, max_tokens=<span class="number">100</span> )</span><br><span class="line"></span><br><span class="line">llm(prompt_text)</span><br></pre></td></tr></table></figure>
<h3><span id="fewshotprompttemplate">FewShotPromptTemplate</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/prompts/langchain_core.prompts.few_shot.FewShotPromptTemplate.html#">æ–‡æ¡£ï¼šFewShotPromptTemplate</a></p>
<ul>
<li>Zero-shot æ˜¯æŒ‡æ¨¡å‹åœ¨æ²¡æœ‰è§è¿‡ä»»ä½•ç‰¹å®šä»»åŠ¡çš„è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹è¿›è¡Œé¢„æµ‹</li>
<li>One-shot æ˜¯æŒ‡æ¨¡å‹åœ¨ä»…è§è¿‡ä¸€ä¸ªè®­ç»ƒæ ·æœ¬çš„æƒ…å†µä¸‹è¿›è¡Œå­¦ä¹ å’Œé¢„æµ‹</li>
<li>Few-shot æ˜¯æŒ‡æ¨¡å‹åœ¨è§è¿‡å¾ˆå°‘é‡çš„è®­ç»ƒæ ·æœ¬ï¼ˆå‡ ä¸ªåˆ°å‡ åä¸ªï¼‰çš„æƒ…å†µä¸‹è¿›è¡Œå­¦ä¹ å’Œé¢„æµ‹</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts.few_shot <span class="keyword">import</span> FewShotPromptTemplate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ·ä¾‹å‡†å¤‡</span></span><br><span class="line"><span class="comment"># ç›¸å½“äºä¼šç»„åˆæ ·ä¾‹ä»¥åŠæ¨¡æ¿ æˆä¸ºçœŸæ­£çš„æ ·ä¾‹</span></span><br><span class="line">examples = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Operators&quot;</span>: <span class="string">&quot;ä»¤&quot;</span>, </span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;ä»¤ï¼Œä¸€ä½è¾…åŠ©å¹²å‘˜&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Operators&quot;</span>: <span class="string">&quot;æ–¯å¡è’‚&quot;</span>, </span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;æ–¯å¡è’‚ï¼Œä¸€ä½è¿‘å«å¹²å‘˜&quot;</span></span><br><span class="line">    &#125;, </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Operators&quot;</span>: <span class="string">&quot;ç¼ªå°”èµ›æ–¯&quot;</span>, </span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;ç¼ªå°”èµ›æ–¯, ä¸€ä½å…ˆé”‹å¹²å‘˜&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">example_template = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼š&#123;Operators&#125;</span></span><br><span class="line"><span class="string">æè¿°ï¼š&#123;description&#125;\n</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">example_prompt = PromptTemplate.from_template(example_template)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">few_shot_prompt = FewShotPromptTemplate(</span><br><span class="line">    examples = examples, </span><br><span class="line">    example_prompt = example_prompt, </span><br><span class="line">    </span><br><span class="line">	<span class="comment"># çœŸå®æé—®</span></span><br><span class="line">    prefix = <span class="string">&quot;ç»™å‡ºæ¯ä¸ªå¹²å‘˜çš„å§“åï¼Œæè¿°æ¯ä¸€ä½å¹²å‘˜çš„èº«ä»½&quot;</span>,</span><br><span class="line">    suffix = <span class="string">&quot;æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼š&#123;Operators&#125;\næè¿°ï¼š\n&quot;</span>,</span><br><span class="line">    input_variables=[<span class="string">&quot;Operators&quot;</span>],</span><br><span class="line">    example_separator = <span class="string">&quot;\n&quot;</span> <span class="comment"># æ ·ä¾‹ç›´æ¥éš”å¼€</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">prompt_text = few_shot_prompt.<span class="built_in">format</span>(Operators=<span class="string">&quot;é»&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(prompt_text)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># prompt_text:</span></span><br><span class="line"><span class="string">ç»™å‡ºæ¯ä¸ªå¹²å‘˜çš„å§“åï¼Œæè¿°æ¯ä¸€ä½å¹²å‘˜çš„èº«ä»½</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šä»¤</span></span><br><span class="line"><span class="string">æè¿°ï¼šä»¤ï¼Œä¸€ä½è¾…åŠ©å¹²å‘˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šæ–¯å¡è’‚</span></span><br><span class="line"><span class="string">æè¿°ï¼šæ–¯å¡è’‚ï¼Œä¸€ä½è¿‘å«å¹²å‘˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šç¼ªå°”èµ›æ–¯</span></span><br><span class="line"><span class="string">æè¿°ï¼šç¼ªå°”èµ›æ–¯, ä¸€ä½å…ˆé”‹å¹²å‘˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šé»</span></span><br><span class="line"><span class="string">æè¿°ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(llm(prompt_text))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># è¾“å‡º</span></span><br><span class="line"><span class="string">æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šè°·ç²’</span></span><br><span class="line"><span class="string">æè¿°ï¼šè°·ç²’ï¼Œä¸€ä½ç ”ç©¶è€…å¹²å‘˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># è‡³å°‘æ ¼å¼å¯¹äº†</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="chains">Chains</span></h2>
<h3><span id="llmchain">LLMChain</span></h3>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/chains/langchain.chains.llm.LLMChain.html#langchain.chains.llm.LLMChain">å¯¹è±¡æ–‡æ¡£ï¼šLLMChain</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> LLMChain</span><br><span class="line"><span class="comment"># æŒ‡å®šæ¨¡å‹ æŒ‡å®šprompt</span></span><br><span class="line">chain1 = LLMChain(llm=llm, prompt=few_shot_prompt)</span><br><span class="line">chain1.invoke(<span class="string">&quot;é»&quot;</span>)</span><br><span class="line"><span class="comment"># &#123;&#x27;Operators&#x27;: &#x27;é»&#x27;, &#x27;text&#x27;: &#x27;æ˜æ—¥æ–¹èˆŸå¹²å‘˜ï¼šè°·ç²’\næè¿°ï¼šè°·ç²’ï¼Œä¸€ä½ç ”ç©¶è€…å¹²å‘˜&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦å¤šä¸ªå‚æ•°æ—¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡æ¿å®šä¹‰</span></span><br><span class="line">template = <span class="string">&quot;&#123;a&#125; + &#123;b&#125; = ?&quot;</span></span><br><span class="line"><span class="comment"># æ„å»ºç»„ä»¶</span></span><br><span class="line">prompt = PromptTemplate.from_template(template)</span><br><span class="line"></span><br><span class="line">chain2 = LLMChain(llm=llm, prompt=prompt)</span><br><span class="line">chain2.invoke(&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;100&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;200&quot;</span>&#125;)</span><br><span class="line"><span class="comment"># &#123;&#x27;a&#x27;: &#x27;100&#x27;, &#x27;b&#x27;: &#x27;200&#x27;, &#x27;text&#x27;: &#x27;300&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h3><span id="simplesequentialchain">SimpleSequentialChain</span></h3>
<p>å°†ä¸Šä¸€ä¸ªchainçš„è¾“å‡ºä½œä¸ºå½“å‰chainçš„è¾“å…¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">template = <span class="string">&quot;&#123;country&#125;çš„é¦–éƒ½æ˜¯å“ªä¸ªåŸå¸‚ï¼Ÿç”¨ä¸€ä¸ªè¯å›ç­”&quot;</span></span><br><span class="line">prompt = PromptTemplate.from_template(template)</span><br><span class="line">chain1 = LLMChain(llm=llm, prompt=prompt)</span><br><span class="line"></span><br><span class="line">template2 = <span class="string">&quot;&#123;city&#125;æœ‰å“ªäº›æ™¯ç‚¹å€¼å¾—å‚è§‚ï¼Ÿç”¨ä¸€å¥è¯åˆ—ä¸¾&quot;</span></span><br><span class="line">prompt2 = PromptTemplate.from_template(template2)</span><br><span class="line">chain2 = LLMChain(llm=llm, prompt=prompt2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»„è£…</span></span><br><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> SimpleSequentialChain</span><br><span class="line">chains = SimpleSequentialChain(chains=[chain1, chain2], verbose=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># verbose=Trueï¼Œå¯ä»¥çœ‹è§æ¨ç†çš„æ­¥éª¤</span></span><br><span class="line">chains.run(<span class="string">&quot;ä¸­å›½&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&gt; Entering new SimpleSequentialChain chain...</span></span><br><span class="line"><span class="string">é¦–éƒ½ï¼šåŒ—äº¬ã€‚</span></span><br><span class="line"><span class="string">æ•…å®«ã€å¤©å®‰é—¨å¹¿åœºã€é•¿åŸã€é¢å’Œå›­ã€é¸Ÿå·¢ç­‰ã€‚</span></span><br><span class="line"><span class="string">&gt; Finished chain.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"># çœŸå®è¾“å‡º</span></span><br><span class="line"><span class="string">&#x27;æ•…å®«ã€å¤©å®‰é—¨å¹¿åœºã€é•¿åŸã€é¢å’Œå›­ã€é¸Ÿå·¢ç­‰ã€‚&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3><span id="llmchainå†è§£é‡Š">LLMChainï¼ˆå†è§£é‡Šï¼‰</span></h3>
<p>æ¯ä¸€ä¸ªLLMChainï¼Œç»‘å®šäº†æ¨¡å‹å’Œprompt</p>
<p>æˆä¸ºä¸€ä¸ªå•ç‹¬çš„å…ƒç´ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> LLMChain</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain1 è‹±æ–‡ç¿»è¯‘ä¸­æ–‡</span></span><br><span class="line">chain1_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¯·å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘æˆæµç•…çš„ä¸­æ–‡ï¼š</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;txt1&#125;</span></span><br><span class="line"><span class="string">ç¿»è¯‘ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain1 = LLMChain(llm=llm, prompt=chain1_prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain2 ä¸­æ–‡å½’çº³</span></span><br><span class="line">chain2_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¯·ç”¨ç®€æ´çš„ä¸€å¥è¯ï¼Œæ¦‚æ‹¬ä»¥ä¸‹æ–‡æœ¬ï¼š</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;txt2&#125;</span></span><br><span class="line"><span class="string">æ¦‚æ‹¬ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain2 = LLMChain(llm=llm, prompt=chain2_prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain3 æ–°é—»æ ‡é¢˜</span></span><br><span class="line">chain3_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¯·ä¸ºä»¥ä¸‹æ–‡æœ¬ç”Ÿæˆä¸€ä¸ªç®€æ´ä¸”å¸å¼•äººçš„æ–°é—»æ ‡é¢˜ï¼š</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;txt3&#125;</span></span><br><span class="line"><span class="string">æ–°é—»æ ‡é¢˜ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain3 = LLMChain(llm=llm, prompt=chain3_prompt)</span><br></pre></td></tr></table></figure>
<h3><span id="simplesequentialchainå†è§£é‡Š">SimpleSequentialChainï¼ˆå†è§£é‡Šï¼‰</span></h3>
<ul>
<li>æ¯ä¸ªLLMChainçš„è¾“å‡ºï¼Œå°†ä½œä¸ºä¸‹ä¸€ä¸ªLLMChainçš„è¾“å…¥</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> SimpleSequentialChain</span><br><span class="line">chains = SimpleSequentialChain(</span><br><span class="line">    chains = [ chain1, chain2, chain3], </span><br><span class="line">    verbose = <span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">chains.invoke(txt)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&gt; Entering new SimpleSequentialChain chain...</span></span><br><span class="line"><span class="string">è¿‘å¹´æ¥ï¼Œè«å°”æ–¯è¥¿å°å§åœ¨å“¥ä¼¦æ¯”äºšå­¦æœ¯ç•Œäº«æœ‰æé«˜çš„å£°èª‰ã€‚å¥¹åœ¨ä¸åˆ°30å²çš„æ—¶å€™ï¼Œå°±å·²ç»æˆä¸ºRhein Lifeåå¼ºäººç‰©ä¹‹ä¸€ï¼Œæ‹…ä»»ç”Ÿæ€å­¦ä¸ç¯å¢ƒç§‘å­¦å¤§å­¦å‰¯æ ¡é•¿ä¸€èŒï¼Œå¹¶æ‹…ä»»ç‰¹é›·è’™å¤šå¤§å­¦å®¢åº§è®²å¸ˆã€‚è¿‡å»åå¹´é—´ï¼Œè«å°”æ–¯è¥¿åŠå…¶ç ”ç©¶å›¢é˜Ÿåœ¨ç”Ÿæ€å­¦ã€é—ä¼ å­¦ã€æ¤ç‰©ç”Ÿç‰©åŒ–å­¦å’Œæ¤ç‰©ç”Ÿç†ç­‰é¢†åŸŸå–å¾—äº†æ˜¾è‘—çªç ´ï¼Œå¯¹å“¥ä¼¦æ¯”äºšç”Ÿå‘½ç§‘å­¦å’Œç¯å¢ƒç§‘å­¦çš„å‘å±•åšå‡ºäº†é‡è¦è´¡çŒ®ã€‚</span></span><br><span class="line"><span class="string">è«å°”æ–¯è¥¿å°å§åœ¨å“¥ä¼¦æ¯”äºšå­¦æœ¯ç•Œäº«æœ‰æé«˜å£°èª‰ï¼Œæ˜¯çŸ¥åç”Ÿæ€å­¦ä¸ç¯å¢ƒç§‘å­¦å¤§å­¦å‰¯æ ¡é•¿åŠç‰¹é›·è’™å¤šå¤§å­¦å®¢åº§è®²å¸ˆï¼Œåœ¨è¿‘åå¹´é—´åœ¨å¤šä¸ªé¢†åŸŸå–å¾—æ˜¾è‘—çªç ´ï¼Œå¯¹å“¥ä¼¦æ¯”äºšç”Ÿå‘½ç§‘å­¦å’Œç¯å¢ƒç§‘å­¦å‘å±•åšå‡ºé‡è¦è´¡çŒ®ã€‚</span></span><br><span class="line"><span class="string">&quot;å“¥ä¼¦æ¯”äºšå­¦è€…è«å°”æ–¯è¥¿å°å§ï¼šæ°å‡ºç”Ÿæ€å­¦å®¶ã€å®¢åº§è®²å¸ˆï¼Œè¿‘åå¹´é‡Œå¤šé¡¹ç ”ç©¶æˆæœç©ç›®ï¼Œå¼•é¢†å“¥ä¼¦æ¯”äºšç”Ÿå‘½ç§‘å­¦å’Œç¯å¢ƒç§‘å­¦å‘å±•&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; Finished chain.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3><span id="sequentialchain">SequentialChain</span></h3>
<p>æˆ‘ä»¬éœ€è¦æ›´åŠ å¤æ‚çš„chainå…³ç³»</p>
<ul>
<li>ç¬¬ä¸‰ä¸ªLLMChainçš„è¾“å…¥ï¼Œç”±ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæä¾›â€¦â€¦</li>
</ul>
<p>æˆ‘ä»¬å°†å¯¹æ¨¡æ¿ä»¥åŠLLMChainçš„keyéå¸¸æ•æ„Ÿ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> LLMChain</span><br><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> PromptTemplate</span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain1 è‹±æ–‡ç¿»è¯‘ä¸­æ–‡</span></span><br><span class="line">chain1_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¯·å°†ä»¥ä¸‹æ–‡æœ¬ç¿»è¯‘æˆæµç•…çš„ä¸­æ–‡ï¼š</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;Source_txt&#125;</span></span><br><span class="line"><span class="string">ç¿»è¯‘ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain1 = LLMChain(llm=llm, prompt=chain1_prompt, output_key=<span class="string">&#x27;Translated_txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain2 è¯­è¨€åˆ†ç±»</span></span><br><span class="line">chain2_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¿™ä¸€æ®µæ–‡æœ¬ä½¿ç”¨çš„æ˜¯å“ªä¸€ç§è¯­è¨€ï¼Ÿ</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;Source_txt&#125;</span></span><br><span class="line"><span class="string">è¯­è¨€ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain2 = LLMChain(llm=llm, prompt=chain2_prompt, output_key=<span class="string">&#x27;answer&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># LLMChain3 ä¸­æ–‡å½’çº³</span></span><br><span class="line">chain3_prompt = PromptTemplate.from_template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¯·ç”¨ç®€æ´çš„ä¸€å¥è¯ï¼Œæ¦‚æ‹¬ä»¥ä¸‹æ–‡æœ¬ï¼š</span></span><br><span class="line"><span class="string">æ–‡æœ¬ï¼š&#123;Translated_txt&#125;</span></span><br><span class="line"><span class="string">æ¦‚æ‹¬ï¼š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line">chain3 = LLMChain(llm=llm, prompt=chain3_prompt, output_key=<span class="string">&#x27;summary&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> SequentialChain</span><br><span class="line">chains = SequentialChain(</span><br><span class="line">    chains = [chain1, chain2, chain3],</span><br><span class="line">    input_variables = [<span class="string">&#x27;Source_txt&#x27;</span>],</span><br><span class="line">    output_variables = [<span class="string">&#x27;Translated_txt&#x27;</span>,<span class="string">&#x27;answer&#x27;</span>, <span class="string">&#x27;summary&#x27;</span>], <span class="comment"># å¦‚æœå¸Œæœ›è¿”å›ä¸­é—´çš„è¾“å‡ºç»“æœ</span></span><br><span class="line">    verbose=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">chains.invoke(txt)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#123;&#x27;Source_txt&#x27;: &#x27;Miss Muelsyse is a highly regarded genius scientist in the academic circles of Columbia in recent years. At less than thirty years old, she has already become one of the top ten figures at Rhine Life, serving as the Director of Ecology and a guest lecturer at the University of Trimondo. Over the past decade, Miss Muelsyse and her research team have made significant advancements in various fields, including ecology, genetics, plant biochemistry, and plant physiology, greatly contributing to the development of life sciences and environmental sciences in Columbia.&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;Translated_txt&#x27;: &#x27;è¿‘å¹´æ¥ï¼Œè«å°”æ–¯è¥¿å°å§åœ¨å“¥ä¼¦æ¯”äºšå­¦æœ¯ç•Œäº«æœ‰æé«˜çš„å£°èª‰ã€‚å¥¹åœ¨ä¸åˆ°30å²çš„æ—¶å€™ï¼Œå°±å·²ç»æˆä¸ºRhein Lifeåå¼ºäººç‰©ä¹‹ä¸€ï¼Œæ‹…ä»»ç”Ÿæ€å­¦ä¸ç¯å¢ƒç§‘å­¦å¤§å­¦å‰¯æ ¡é•¿ä¸€èŒï¼Œå¹¶æ‹…ä»»ç‰¹é›·è’™å¤šå¤§å­¦å®¢åº§è®²å¸ˆã€‚è¿‡å»åå¹´é—´ï¼Œè«å°”æ–¯è¥¿åŠå…¶ç ”ç©¶å›¢é˜Ÿåœ¨ç”Ÿæ€å­¦ã€é—ä¼ å­¦ã€æ¤ç‰©ç”Ÿç‰©åŒ–å­¦å’Œæ¤ç‰©ç”Ÿç†ç­‰é¢†åŸŸå–å¾—äº†æ˜¾è‘—çªç ´ï¼Œå¯¹å“¥ä¼¦æ¯”äºšç”Ÿå‘½ç§‘å­¦å’Œç¯å¢ƒç§‘å­¦çš„å‘å±•åšå‡ºäº†é‡è¦è´¡çŒ®ã€‚&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;answer&#x27;: &#x27;è¿™æ®µæ–‡æœ¬ä½¿ç”¨äº†è‹±è¯­ã€‚&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;summary&#x27;: &#x27;è«å°”æ–¯è¥¿å°å§åœ¨å“¥ä¼¦æ¯”äºšå­¦æœ¯ç•Œäº«æœ‰æé«˜å£°èª‰ï¼Œæ˜¯çŸ¥åç”Ÿæ€å­¦ä¸ç¯å¢ƒç§‘å­¦å¤§å­¦å‰¯æ ¡é•¿åŠç‰¹é›·è’™å¤šå¤§å­¦å®¢åº§è®²å¸ˆï¼Œåœ¨è¿‘åå¹´é—´åœ¨å¤šä¸ªé¢†åŸŸå–å¾—æ˜¾è‘—çªç ´ï¼Œå¯¹å“¥ä¼¦æ¯”äºšç”Ÿå‘½ç§‘å­¦å’Œç¯å¢ƒç§‘å­¦å‘å±•åšå‡ºé‡è¦è´¡çŒ®ã€‚&#x27;&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="agents">Agents</span></h2>
<p>é¢„è®­ç»ƒçš„LLMèƒ½åŠ›æœ‰é™ï¼ˆæ•°å­¦èƒ½åŠ›ã€é€»è¾‘ã€å®æ—¶ä¿¡æ¯ï¼‰ï¼Œéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹å·¥å…·è¿›è¡Œè¾…åŠ©</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/toolkits/">Toolkits | ğŸ¦œï¸ğŸ”— LangChain</a></p>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/v0.2/docs/integrations/tools/">Tools | ğŸ¦œï¸ğŸ”— LangChain</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">!pip install numexpr</span><br><span class="line"><span class="keyword">from</span> langchain.agents <span class="keyword">import</span> load_tools, initialize_agent, AgentType</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ç¬¬ä¸‰æ–¹å·¥å…·</span></span><br><span class="line">tools = load_tools([<span class="string">&quot;llm-math&quot;</span>], llm=llm)</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–agent</span></span><br><span class="line">agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">agent.run(<span class="string">&quot;Assume you are 12 years old now, what&#x27;s your age raised to the 0.43 power?&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">To calculate the amount by which my current age is raised to the power of 0.43, we first need to determine my current age and then multiply it by 0.43.</span></span><br><span class="line"><span class="string">My current age:</span></span><br><span class="line"><span class="string">Since I am currently 12 years old, my current age is 12.</span></span><br><span class="line"><span class="string">To find the power 0.43, we divide the current age by 0.43:</span></span><br><span class="line"><span class="string">Power = Current Age / 0.43</span></span><br><span class="line"><span class="string">Power = 12 / 0.43</span></span><br><span class="line"><span class="string">Power â‰ˆ 30.867294153885714</span></span><br><span class="line"><span class="string">Thought: The calculation has been completed successfully.</span></span><br><span class="line"><span class="string">Final Answer: My current age raised to the 0.43 power is approximately 30.87.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; Finished chain.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="memory">Memory</span></h2>
<h3><span id="chatmessagehistory">ChatMessageHistory</span></h3>
<ul>
<li>è®°å½•æ¶ˆæ¯å­˜å‚¨è®°å½•</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.memory <span class="keyword">import</span> ChatMessageHistory</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®°å½•æ¶ˆæ¯å­˜å‚¨è®°å½•</span></span><br><span class="line">history = ChatMessageHistory()</span><br><span class="line"></span><br><span class="line">history.add_user_message(<span class="string">&quot;ä»Šå¤©å¼€å­¦&quot;</span>) <span class="comment"># user</span></span><br><span class="line">history.add_ai_message(<span class="string">&quot;å¥½çš„ï¼Œæ˜å¤©è§&quot;</span>) <span class="comment"># ai</span></span><br><span class="line"></span><br><span class="line">history.messages <span class="comment"># æŸ¥çœ‹æ¶ˆæ¯è®°å½•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [HumanMessage(content=&#x27;ä»Šå¤©å¼€å­¦&#x27;), AIMessage(content=&#x27;å¥½çš„ï¼Œæ˜å¤©è§&#x27;)]</span></span><br></pre></td></tr></table></figure>
<h3><span id="é•¿æœŸè®°å¿†">é•¿æœŸè®°å¿†</span></h3>
<p>æˆ‘ä»¬éœ€è¦æŠŠä¹‹å‰çš„å¯¹è¯å­˜å‚¨ä¸‹æ¥ï¼Œå¯ä»¥è€ƒè™‘å­˜å‚¨æˆå­—å…¸å½¢å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.memory <span class="keyword">import</span> ChatMessageHistory</span><br><span class="line"><span class="keyword">from</span> langchain.schema <span class="keyword">import</span> messages_to_dict, messages_from_dict</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„messageså’Œmessageæ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…æ˜¯åˆ—è¡¨ï¼Œåè€…æ˜¯å•ä¸ªæ¶ˆæ¯</span></span><br><span class="line"><span class="comment"># è¿™é‡Œä½¿ç”¨s</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">history = ChatMessageHistory()</span><br><span class="line"></span><br><span class="line">history.add_user_message(<span class="string">&quot;ä»Šå¤©å¼€å­¦&quot;</span>) <span class="comment"># user</span></span><br><span class="line">history.add_ai_message(<span class="string">&quot;å¥½çš„ï¼Œæ˜å¤©è§&quot;</span>) <span class="comment"># ai</span></span><br><span class="line"></span><br><span class="line">dicts = messages_to_dict(history.messages)</span><br><span class="line"><span class="built_in">print</span>(dicts)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&#123;&#x27;type&#x27;: &#x27;human&#x27;, &#x27;data&#x27;: &#123;&#x27;content&#x27;: &#x27;ä»Šå¤©å¼€å­¦&#x27;, &#x27;additional_kwargs&#x27;: &#123;&#125;, &#x27;response_metadata&#x27;: &#123;&#125;, &#x27;type&#x27;: &#x27;human&#x27;, &#x27;name&#x27;: None, &#x27;id&#x27;: None, &#x27;example&#x27;: False&#125;&#125;, &#123;&#x27;type&#x27;: &#x27;ai&#x27;, &#x27;data&#x27;: &#123;&#x27;content&#x27;: &#x27;å¥½çš„ï¼Œæ˜å¤©è§&#x27;, &#x27;additional_kwargs&#x27;: &#123;&#125;, &#x27;response_metadata&#x27;: &#123;&#125;, &#x27;type&#x27;: &#x27;ai&#x27;, &#x27;name&#x27;: None, &#x27;id&#x27;: None, &#x27;example&#x27;: False, &#x27;tool_calls&#x27;: [], &#x27;invalid_tool_calls&#x27;: [], &#x27;usage_metadata&#x27;: None&#125;&#125;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">new_history = messages_from_dict(dicts)</span><br><span class="line"><span class="built_in">print</span>(new_history)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[HumanMessage(content=&#x27;ä»Šå¤©å¼€å­¦&#x27;), AIMessage(content=&#x27;å¥½çš„ï¼Œæ˜å¤©è§&#x27;)]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3><span id="conversationchains">ConversationChains</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> ConversationChain</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒè®°å½•çš„å¯¹è¯chain</span></span><br><span class="line">conversation = ConversationChain(llm=llm, verbose=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹template</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know. </span></span><br><span class="line"><span class="string">Current conversation: &#123;history&#125;</span></span><br><span class="line"><span class="string">Human: &#123;input&#125;</span></span><br><span class="line"><span class="string">AI:</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ¯æ¬¡éƒ½ä¼šå­˜å‚¨ä¹‹å‰çš„å†å²è®°å½•ï¼Œæ”¾å…¥æœ¬æ¬¡çš„è¾“å…¥ï¼Œè®©AIå¡«å†™æ–°çš„å›å¤å†…å®¹</p>
<p>ä¸ºäº†é˜²æ­¢å›å¤è¯æ•°è¿‡å¤šï¼Œç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">conversation.prompt.template = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.</span></span><br><span class="line"><span class="string">Current conversation:</span></span><br><span class="line"><span class="string">&#123;history&#125;</span></span><br><span class="line"><span class="string">Human: &#123;input&#125;</span></span><br><span class="line"><span class="string">AI:</span></span><br><span class="line"><span class="string">æ³¨æ„ï¼Œåªå…è®¸ä½¿ç”¨ä¸è¶…è¿‡10ä¸ªå­—è¿›è¡Œç®€å•å›ç­”</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">response = conversation.predict(<span class="built_in">input</span>=<span class="string">&#x27;æˆ‘å§å§æ˜å¤©è¦è¿‡ç”Ÿæ—¥ï¼Œæ¨èä¸€æŸç”Ÿæ—¥èŠ±æŸçš„ç§ç±»ã€‚&#x27;</span>)</span><br><span class="line">response = conversation.predict(<span class="built_in">input</span>=<span class="string">&#x27;å¥¹å–œæ¬¢çš„é¢œè‰²æ˜¯ç²‰è‰²çš„ã€‚&#x27;</span>)</span><br><span class="line">response = conversation.predict(<span class="built_in">input</span>=<span class="string">&#x27;æˆ‘ä¸ºä»€ä¹ˆè¦ä¹°èŠ±&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conversation.memory.chat_memory.messages</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[HumanMessage(content=&#x27;æˆ‘å§å§æ˜å¤©è¦è¿‡ç”Ÿæ—¥ï¼Œæ¨èä¸€æŸç”Ÿæ—¥èŠ±æŸçš„ç§ç±»ã€‚&#x27;),</span></span><br><span class="line"><span class="string"> AIMessage(content=&#x27;&quot;ç«ç‘°ã€ç™¾åˆã€éƒé‡‘é¦™ã€åº·ä¹ƒé¦¨ã€å¤ªé˜³èŠ±&quot;ã€‚&#x27;),</span></span><br><span class="line"><span class="string"> HumanMessage(content=&#x27;å¥¹å–œæ¬¢çš„é¢œè‰²æ˜¯ç²‰è‰²çš„ã€‚&#x27;),</span></span><br><span class="line"><span class="string"> AIMessage(content=&#x27;ç²‰è‰²åº·ä¹ƒé¦¨ã€‚&#x27;),</span></span><br><span class="line"><span class="string"> HumanMessage(content=&#x27;æˆ‘ä¸ºä»€ä¹ˆè¦ä¹°èŠ±&#x27;),</span></span><br><span class="line"><span class="string"> AIMessage(content=&#x27;ä¸ºäº†åº†ç¥å¥¹ç”Ÿæ—¥ã€‚&#x27;)]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2><span id="indexes">Indexes</span></h2>
<p>å¯¹æ–‡æ¡£ï¼ˆtxtã€pdfã€mdâ€¦â€¦ï¼‰è¿›è¡Œå¤„ç†ã€æ£€ç´¢</p>
<h3><span id="textloader">TextLoader</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"></span><br><span class="line">loader = TextLoader(<span class="string">&#x27;source.txt&#x27;</span>)</span><br><span class="line">txt = loader.load() <span class="comment"># åŠ è½½æ–‡æ¡£</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(txt)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(txt))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€ä»£å·ã€‘ç¼ªå°”èµ›æ€\nã€æ€§åˆ«ã€‘å¥³\nã€æˆ˜æ–—ç»éªŒã€‘æ²¡æœ‰æˆ˜æ–—ç»éªŒ\nã€å‡ºèº«åœ°ã€‘æœªå…¬å¼€\nã€ç”Ÿæ—¥ã€‘11æœˆ3æ—¥\nã€ç§æ—ã€‘ç²¾çµ\nã€èº«é«˜ã€‘169cm\nã€çŸ¿çŸ³ç—…æ„ŸæŸ“æƒ…å†µã€‘\nå‚ç…§åŒ»å­¦æ£€æµ‹æŠ¥å‘Šï¼Œç¡®è®¤ä¸ºéæ„ŸæŸ“è€…ã€‚&#x27;)]</span></span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>
<h3><span id="charactertextsplitter">CharacterTextSplitter</span></h3>
<ul>
<li>å¸¸å°†æ–‡æœ¬åˆ‡åˆ†æˆå¤šä¸ªæ®µ</li>
<li>åˆ‡åˆ†æ–¹å¼
<ul>
<li>æŒ‰å­—æ•°ï¼Œç®€å•ï¼Œä½†æ˜¯å®¹æ˜“åˆ‡å‡ºæ²¡æ„ä¹‰çš„æ®µè½</li>
<li>æŒ‰ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚å›è½¦ç¬¦</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line">text_splitter = CharacterTextSplitter(</span><br><span class="line">    separator=<span class="string">&#x27;\n&#x27;</span>, <span class="comment"># åˆ‡åˆ†ç¬¦</span></span><br><span class="line">    chunk_size=<span class="number">10</span>,  <span class="comment"># chunkå¤§å°</span></span><br><span class="line">    chunk_overlap=<span class="number">0</span> <span class="comment"># é‡å </span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡å‰²æˆå­—ç¬¦ä¸²åˆ—è¡¨</span></span><br><span class="line">txt_doc = text_splitter.split_text(txt[<span class="number">0</span>].page_content)</span><br><span class="line"><span class="built_in">print</span>(txt_doc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡å‰²æˆdocumentå¯¹è±¡åˆ—è¡¨</span></span><br><span class="line">texts = text_splitter.split_documents(txt)</span><br><span class="line"><span class="built_in">print</span>(texts)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&#x27;ã€ä»£å·ã€‘ç¼ªå°”èµ›æ€&#x27;, &#x27;ã€æ€§åˆ«ã€‘å¥³&#x27;, &#x27;ã€æˆ˜æ–—ç»éªŒã€‘æ²¡æœ‰æˆ˜æ–—ç»éªŒ&#x27;, &#x27;ã€å‡ºèº«åœ°ã€‘æœªå…¬å¼€&#x27;, &#x27;ã€ç”Ÿæ—¥ã€‘11æœˆ3æ—¥&#x27;, &#x27;ã€ç§æ—ã€‘ç²¾çµ&#x27;, &#x27;ã€èº«é«˜ã€‘169cm&#x27;, &#x27;ã€çŸ¿çŸ³ç—…æ„ŸæŸ“æƒ…å†µã€‘&#x27;, &#x27;å‚ç…§åŒ»å­¦æ£€æµ‹æŠ¥å‘Šï¼Œç¡®è®¤ä¸ºéæ„ŸæŸ“è€…ã€‚&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€ä»£å·ã€‘ç¼ªå°”èµ›æ€&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€æ€§åˆ«ã€‘å¥³&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€æˆ˜æ–—ç»éªŒã€‘æ²¡æœ‰æˆ˜æ–—ç»éªŒ&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€å‡ºèº«åœ°ã€‘æœªå…¬å¼€&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€ç”Ÿæ—¥ã€‘11æœˆ3æ—¥&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€ç§æ—ã€‘ç²¾çµ&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€èº«é«˜ã€‘169cm&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;ã€çŸ¿çŸ³ç—…æ„ŸæŸ“æƒ…å†µã€‘&#x27;), Document(metadata=&#123;&#x27;source&#x27;: &#x27;source.txt&#x27;&#125;, page_content=&#x27;å‚ç…§åŒ»å­¦æ£€æµ‹æŠ¥å‘Šï¼Œç¡®è®¤ä¸ºéæ„ŸæŸ“è€…ã€‚&#x27;)]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3><span id="å‘é‡æ•°æ®åº“">å‘é‡æ•°æ®åº“</span></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain_community.embeddings <span class="keyword">import</span> DashScopeEmbeddings</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">embeddings = DashScopeEmbeddings(</span><br><span class="line">    model=<span class="string">&quot;text-embedding-v1&quot;</span>, dashscope_api_key=os.environ[<span class="string">&quot;DASHSCOPE_API_KEY&quot;</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">db = FAISS.from_documents(documents, embeddings) <span class="comment"># æ„å»ºæ•°æ®åº“</span></span><br><span class="line">retriever = db.as_retriever( <span class="comment"># è½¬æ¢ä¸ºæ£€ç´¢å™¨ è¿”å›æœ€ç›¸å…³çš„kä¸ªæ–‡æ¡£</span></span><br><span class="line">    search_kwargs = &#123;</span><br><span class="line">        <span class="string">&#x27;k&#x27;</span>: <span class="number">2</span></span><br><span class="line">	&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">result = retriever.get_relevant_documents(<span class="string">&quot;å­¦é™¢å…±æœ‰å‡ æ¬¡æ™‹çº§ICPCå›½é™…å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›å…¨çƒæ€»å†³èµ›ï¼Œåˆ†åˆ«æ˜¯å“ªå‡ å¹´ï¼Ÿ&quot;</span>)</span><br><span class="line">result</span><br><span class="line"></span><br></pre></td></tr></table></figure>

    </article>
    <!-- license -->
        <div class="license-wrapper">
            <p>åŸæ–‡ä½œè€…ï¼š<a href="https://aoijays.top">BiribiriBird</a>
            <p>åŸæ–‡é“¾æ¥ï¼š<a href="https://aoijays.top/2024/08/11/langchain-zero/">https://aoijays.top/2024/08/11/langchain-zero/</a>
            <p>å‘è¡¨æ—¥æœŸï¼š<a href="https://aoijays.top/2024/08/11/langchain-zero/">August 11th 2024, 5:04:46 pm</a>
            <p>æ›´æ–°æ—¥æœŸï¼š<a href="https://aoijays.top/2024/08/11/langchain-zero/">August 11th 2024, 5:06:31 pm</a>
            <p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é‡‡ç”¨<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯</p>
        </div>
    <!-- paginator -->
    <ul class="post-paginator">
        <li class="next">
                <div class="nextSlogan">Next Post</div>
                <a href="/2024/08/11/Lee-ML-L4/" title="æå®æ¯…æœºå™¨å­¦ä¹ L3 Â· Sequence as input">
                    <div class="nextTitle">æå®æ¯…æœºå™¨å­¦ä¹ L3 Â· Sequence as input</div>
                </a>
        </li>
        <li class="previous">
                <div class="prevSlogan">Previous Post</div>
                <a href="/2024/08/05/D2l-Part3-ssd/" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part3 SSDä»£ç å®ç°">
                    <div class="prevTitle">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part3 SSDä»£ç å®ç°</div>
                </a>
        </li>
    </ul>
    <!-- comment -->
        <div class="post-comment">
            <!-- æ¥å¿…åŠ› City ç‰ˆå®‰è£…ä»£ç  -->

            
            
            
            <!-- utterancè¯„è®º -->

            <!-- partial('_partial/comment/changyan') -->
            <!--PCç‰ˆ-->

            
            
            
        </div>
    <!-- timeliness note -->
    <!-- idea from: https://hexo.fluid-dev.com/posts/hexo-injector/#%E6%96%87%E7%AB%A0%E6%97%B6%E6%95%88%E6%80%A7%E6%8F%90%E7%A4%BA -->
    <!-- Mathjax -->
</main>

                <!-- profile -->
            </div>
            <footer class="footer footer-unloaded">
    <!-- social  -->
        <div class="social">
                            <a href="mailto:954436671@qq.com" class="iconfont-archer email" title="email" ></a>
                <a href="//github.com/aoijays" class="iconfont-archer github" target="_blank" title="github"></a>
                <a href="https://www.zhihu.com/people/Chirs2002" class="iconfont-archer zhihu" target="_blank" title="zhihu"></a>
                <a href="https://www.instagram.com/biribiribird/" class="iconfont-archer instagram" target="_blank" title="instagram"></a>
                <a href="https://space.bilibili.com/498088093" class="iconfont-archer bilibili" target="_blank" title="bilibili"></a>

        </div>
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- website approve for Chinese user -->
    <!-- ä¸è’œå­  -->
        <div class="busuanzi-container">
                <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
        </div>
</footer>

        </div>
        <!-- toc -->
            <div class="toc-wrapper toc-wrapper-loding" style=    top:50vh;
>
                <div class="toc-catalog">
                    <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
                </div>
                <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Langchainå…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.1.</span> <span class="toc-text">å‰ç½®å·¥ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.1.</span> <span class="toc-text">API-KEYé…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.2.</span> <span class="toc-text">APIè°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.1.3.</span> <span class="toc-text">Promt ç®€å•åº”ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.2.</span> <span class="toc-text">ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.3.</span> <span class="toc-text">Models</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.1.</span> <span class="toc-text">LLMs</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">æµå¼è¾“å‡º</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.2.</span> <span class="toc-text">Chat Models</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.3.3.</span> <span class="toc-text">Embedding models</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.4.</span> <span class="toc-text">Prompts</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.1.</span> <span class="toc-text">PromptTemplate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.4.2.</span> <span class="toc-text">FewShotPromptTemplate</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.5.</span> <span class="toc-text">Chains</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.1.</span> <span class="toc-text">LLMChain</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.2.</span> <span class="toc-text">SimpleSequentialChain</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.3.</span> <span class="toc-text">LLMChainï¼ˆå†è§£é‡Šï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.4.</span> <span class="toc-text">SimpleSequentialChainï¼ˆå†è§£é‡Šï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.5.5.</span> <span class="toc-text">SequentialChain</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.6.</span> <span class="toc-text">Agents</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.7.</span> <span class="toc-text">Memory</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.7.1.</span> <span class="toc-text">ChatMessageHistory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.7.2.</span> <span class="toc-text">é•¿æœŸè®°å¿†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.7.3.</span> <span class="toc-text">ConversationChains</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.8.</span> <span class="toc-text">Indexes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.8.1.</span> <span class="toc-text">TextLoader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.8.2.</span> <span class="toc-text">CharacterTextSplitter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.8.3.</span> <span class="toc-text">å‘é‡æ•°æ®åº“</span></a></li></ol></li></ol></li></ol>
            </div>
        <!-- sidebar -->
        <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
        <div class="sidebar-panel-archives">
    <!-- åœ¨ ejs ä¸­å°† archive æŒ‰ç…§æ—¶é—´æ’åº -->
        
        
        
        
        
        
        
        
        
        
        
        
        
    <div class="total-and-search">
        <div class="total-archive">
        Total : 13
        </div>
        <!-- search  -->
    </div>
    <div class="post-archive">
            <div class="archive-year"> 2024 </div>
            <ul class="year-list">
        <li class="archive-post-item">
            <span class="archive-post-date">08/11</span>
            <a class="archive-post-title" href="/2024/08/11/Lee-ML-L4/">æå®æ¯…æœºå™¨å­¦ä¹ L3 Â· Sequence as input</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/11</span>
            <a class="archive-post-title" href="/2024/08/11/langchain-zero/">Langchainå…¥é—¨ç¬”è®°</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span>
            <a class="archive-post-title" href="/2024/08/05/D2l-Part3-ssd/">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part3 SSDä»£ç å®ç°</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">08/04</span>
            <a class="archive-post-title" href="/2024/08/04/D2l-Part3/">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part3 è®¡ç®—æœºè§†è§‰</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/28</span>
            <a class="archive-post-title" href="/2024/07/28/D2l-Part2/">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part2 å·ç§¯ç¥ç»ç½‘ç»œ</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/27</span>
            <a class="archive-post-title" href="/2024/07/27/Lee-ML-L3/">æå®æ¯…æœºå™¨å­¦ä¹ L3 Â· Image as input</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/25</span>
            <a class="archive-post-title" href="/2024/07/25/Lee-ML-L2/">æå®æ¯…æœºå™¨å­¦ä¹ L2 Â· What to do if my network fails to train</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/23</span>
            <a class="archive-post-title" href="/2024/07/23/D2l-Part1/">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹  Â· Part1 æ·±åº¦å­¦ä¹ åŸºç¡€</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">07/21</span>
            <a class="archive-post-title" href="/2024/07/21/Pytorch-intro/">Pytorchå°åœŸå † - ç¬”è®°</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">06/13</span>
            <a class="archive-post-title" href="/2024/06/13/MLP-Handwrite-2024-6/">æ‰‹æ¨ç¥ç»ç½‘ç»œ</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/26</span>
            <a class="archive-post-title" href="/2024/05/26/cuda-zero-2024-5/">CUDAç¼–ç¨‹0åŸºç¡€å…¥é—¨ç¬”è®°</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">05/01</span>
            <a class="archive-post-title" href="/2024/05/01/CS231A/">CS231A - è®¡ç®—æœºè§†è§‰è¯¾å ‚ç¬”è®°</a>
        </li>
        <li class="archive-post-item">
            <span class="archive-post-date">01/06</span>
            <a class="archive-post-title" href="/2024/01/06/hello-world/">Hello World</a>
        </li>
            </ul>
    </div>
</div>

        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
            <span class="sidebar-tag-name" data-tags="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ">
                <span class="iconfont-archer">&#xe606;</span>
                åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 
            </span>
            <span class="sidebar-tag-name" data-tags="æ·±åº¦å­¦ä¹ ">
                <span class="iconfont-archer">&#xe606;</span>
                æ·±åº¦å­¦ä¹ 
            </span>
            <span class="sidebar-tag-name" data-tags="æå®æ¯…">
                <span class="iconfont-archer">&#xe606;</span>
                æå®æ¯…
            </span>
            <span class="sidebar-tag-name" data-tags="cuda">
                <span class="iconfont-archer">&#xe606;</span>
                cuda
            </span>
            <span class="sidebar-tag-name" data-tags="Pytorch">
                <span class="iconfont-archer">&#xe606;</span>
                Pytorch
            </span>
            <span class="sidebar-tag-name" data-tags="CV">
                <span class="iconfont-archer">&#xe606;</span>
                CV
            </span>
            <span class="sidebar-tag-name" data-tags="langchain">
                <span class="iconfont-archer">&#xe606;</span>
                langchain
            </span>
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
        ç¼ºå¤±æ¨¡å—ï¼Œè¯·å‚è€ƒä¸»é¢˜æ–‡æ¡£è¿›è¡Œå®‰è£…é…ç½®ï¼šhttps://github.com/fi3ework/hexo-theme-archer#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98
    </div> 
    <div class="sidebar-tags-list"></div>
</div>

        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>

    </div>
</div>

        <!-- site-meta -->
        <script>
    var siteMetaRoot = "/"
    if (siteMetaRoot === "undefined") {
        siteMetaRoot = '/'
    }
    var siteMeta = {
        url: "https://aoijays.top",
        root: siteMetaRoot,
        author: "BiribiriBird"
    }
</script>

        <!-- import experimental options here -->
        <!-- Custom Font -->

        <!-- main func -->
        <script src="/scripts/main.js"></script>
        <!-- fancybox -->
        <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.36/dist/fancybox/fancybox.umd.js" onload="window.Fancybox.bind('[data-fancybox]')" defer></script>
        <!-- algolia -->
        <!-- busuanzi -->
            <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>
        <!-- async load share.js -->
            <script src="/scripts/share.js" async></script>
        <!-- mermaid -->
    </body>
</html>
